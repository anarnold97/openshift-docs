// Module included in the following assemblies:
//
// ../../backup_and_restore/application_backup_and_restore/installing/3scale.adoc
:_mod-docs-content-type: PROCEDURE
[id="oadp-three-scale-operator-back-and-restore_{context}"]
= OADP Operator backup and restore

.Prerequisites

* Source and destination clusters are of the same {OCP} (OCP) or {osd} (OSD) version.

* The 3scale installation has its job queue drained before running the backup.

* The 3scale installation is fully functional at the time of backup.

// * There are two approaches for backing up the system database, as recommended by OADP.

* The operator is restored by re-creating the subscription and operator groups. If you have changed any values of their operator using the CSV, then the operator is not properly recovered.

* This scenario does not use a custom domain; with a custom domain, with custom domain the restoration could be easier as the routes do not have to be updated manually in the database. If a default cluster domain is used, you have to update their domains in the database after the database is migrated.

// * Installation and configuration of OADP can be found in the OADP documentation, I have followed the setup for OADP with AWS as the s3 provider (based on this doc [up to and excluding the backing up section]). The important bit is to enable Restic (when creating the DataProtectionApplication CR) since it is what we are going to use to perform the backup and restoration of the PVs. These steps need to be performed for both the source cluster and the destination cluster.
