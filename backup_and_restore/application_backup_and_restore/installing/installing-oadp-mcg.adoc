:_content-type: ASSEMBLY
[id="installing-oadp-mcg"]
= Configuring the OpenShift API for Data Protection with Multicloud Object Gateway
include::_attributes/common-attributes.adoc[]
:context: installing-oadp-mcg
:installing-oadp-mcg:
:credentials: cloud-credentials
:provider: aws

toc::[]

You install the OpenShift API for Data Protection (OADP) with Multicloud Object Gateway (MCG) by installing the OADP Operator. The Operator installs link:https://{velero-domain}/docs/v{velero-version}/[Velero {velero-version}].

include::snippets/oadp-mtc-operator.adoc[]

You configure xref:../../../backup_and_restore/application_backup_and_restore/installing/installing-oadp-mcg.adoc#installing-oadp-mcg[Multicloud Object Gateway] as a backup location.
MCG is a component of {rh-storage}. You configure MCG as a backup location in the `DataProtectionApplication` custom resource (CR).

:FeatureName: The `CloudStorage` API, which automates the creation of a bucket for object storage,
include::snippets/technology-preview.adoc[]

You create a `Secret` for the backup location and then you install the Data Protection Application.

To install the OADP Operator in a restricted network environment, you must first disable the default OperatorHub sources and mirror the Operator catalog. For details, see xref:../../../operators/admin/olm-restricted-networks.adoc#olm-restricted-networks[Using Operator Lifecycle Manager on restricted networks].

// include::modules/oadp-installing-operator.adoc[leveloffset=+1]
include::modules/migration-configuring-mcg.adoc[leveloffset=+1]

//include::modules/oadp-about-backup-snapshot-locations-secrets.adoc[leveloffset=+1]

[id="creating-default-secret-mcg"]
== Creating a default Secret

You create a default `Secret` if your backup and snapshot locations use the same credentials or if you do not require a snapshot location, see xref:../../../backup_and_restore/application_backup_and_restore/installing/oadp-creating-default-secret-doc.adoc#oadp-creating-default-secret-doc[Default secret].

[id="oadp-secrets-for-different-credentials-mcg"]
== Creating profiles for different credentials

If your backup and snapshot locations use different credentials, you create separate profiles in the `credentials-velero` file, see xref:../../../backup_and_restore/application_backup_and_restore/installing/oadp-secrets-for-different-credentials.adoc#oadp-secrets-for-different-credentials[Different credentials].

[id="configuring-backup-snapshot-locations-mcg"]
== Creating backup and snapshot locations

You specify backup and snapshot locations and their secrets in the `DataProtectionApplication` custom resource (CR), see xref:../../../backup_and_restore/application_backup_and_restore/installing/oadp-about-backup-snapshot-locations-secrets-doc.adoc#oadp-about-backup-snapshot-locations-doc[Creating backup and snapshot locations].

// include::modules/oadp-creating-default-secret.adoc[leveloffset=+2]
// include::modules/oadp-secrets-for-different-credentials.adoc[leveloffset=+2]

[id="configuring-dpa-mcg"]
== Configuring the Data Protection Application

You can configure the Data Protection Application by setting Velero resource allocations or enabling self-signed CA certificates.

include::modules/oadp-setting-resource-limits-and-requests.adoc[leveloffset=+2]
include::modules/oadp-self-signed-certificate.adoc[leveloffset=+2]

include::modules/oadp-installing-dpa.adoc[leveloffset=+1]
include::modules/oadp-enabling-csi-dpa.adoc[leveloffset=+2]

:installing-oadp-mcg!:
