:_mod-docs-content-type: ASSEMBLY
include::_attributes/common-attributes.adoc[]
include::_attributes/attributes-openshift-dedicated.adoc[]
[id="backing-up-vms-using-oadp"]
= Backing up virtual machines using OADP
:context: oadp-backing-up-vms
:installing-oadp-kubevirt:

toc::[]

.Prerequisites

* Access to the cluster as a user with the `cluster-admin` role.

.Procedure

* Install the OADP Operator according to the instructions for your storage provider. For more details, see xref:../../../backup_and_restore/application_backup_and_restore/installing/about-installing-oadp.adoc#about-installing-oadp[installing the {oadp-first} Operator]

* Install the Data Protection Application with the kubevirt and openshift plugins. For more details, see xref:oadp-installing-dpa-1-3_oadp-backing-up-vms[Installing the Data Protection Application] with the xref:../../../backup_and_restore/application_backup_and_restore/oadp-features-plugins.adoc#oadp-plugins_oadp-features-plugins[`kubevirt` and `openshift` plugins]

* Back up virtual machines by creating a Backup custom resource (CR). For more details, see xref:oadp-creating-backup-cr.adoc_oadp-backing-up-vms[Creating a `Backup` custom resource (CR)].

* Restore the Backup CR by creating a Restore CR. For more details, see xref:../../../backup_and_restore/application_backup_and_restore/installing/restoring-vms-using-oadp.adoc#oadp-creating-restore-cr_restoring-vms-using-oadp[Creating a Restore CR].


include::modules/oadp-about-backup-snapshot-locations-secrets.adoc[leveloffset=+1]

include::modules/oadp-creating-default-secret.adoc[leveloffset=+2]

include::modules/oadp-secrets-for-different-credentials.adoc[leveloffset=+2]


[id="configuring-dpa-kubevirt"]
== Configuring the Data Protection Application

You can configure the Data Protection Application by setting Velero resource allocations or enabling self-signed CA certificates.


include::modules/oadp-kubevirt-setting-resource-limits-and-requests.adoc[leveloffset=+2]

include::modules/oadp-self-signed-certificate.adoc[leveloffset=+2]

include::modules/oadp-installing-dpa-1-3.adoc[leveloffset=+1]

[IMPORTANT]
.OADP 1.2
====
Red Hat only supports the combination of OADP versions 1.3.0 and later, and {VirtProductName} versions 4.14 and later.
OADP versions before 1.3.0 are not supported for back up and restore of {VirtProductName}.
====

include::modules/oadp-backing-up-pvs-csi.adoc[leveloffset=+2]

[WARNING]
====
Red Hat support is limited to only the following options:
* CSI backups
* CSI backups with DataMover. For more information, see xref:../../../backing-up-restoring-vms-using-oadp.adoc#backing-up-restoring-fedora-vm-block-pv[Backup and restore a running Virtual Machine, with native DataMover].
====

include::modules/oadp-creating-backup-cr.adoc[leveloffset=+2]


[role="_additional-resources"]
[id="additional-resources_virt-backup-restore-overview"]
== Additional resources

* xref:../../../backup_and_restore/application_backup_and_restore/oadp-features-plugins.adoc#oadp-features-plugins[OADP features and plugins]
* xref:../../../virt/backup_restore/virt-backing-up-vms.adoc#oadp-backing-up-pvs-csi_virt-backing-up-vms[Container Storage Interface (CSI) snapshots] on CSI-enabled cloud storage, such as Ceph RBD or Ceph FS.
* xref:../../../backup_and_restore/application_backup_and_restore/troubleshooting.adoc#troubleshooting[Troubleshooting]
* xref:../../../backing-up-restoring-vms-using-oadp.adoc#backing-up-restoring-fedora-vm-block-pv[Backup and restore a running Virtual Machine, with native DataMover]

:!installing-oadp-kubevirt:
